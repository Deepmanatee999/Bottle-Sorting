<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bottle Sorting System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<style>
    /* ========= GLOBAL DARK MODE ========= */
    body {
        font-family: Arial;
        background: #0f1115;
        color: #fff;
        margin: 0;
        padding: 0;
    }

    /* ========= TOP NAV ========= */
    header {
        background: #111318;
        padding: 16px 26px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px solid #0bbf9a;
    }

    h2 {
        font-weight: bold;
        font-size: 20px;
        margin: 0;
        color: #0bbf9a;
    }

    nav button {
        background: transparent;
        border: 1px solid #0bbf9a33;
        color: #0bbf9a;
        padding: 8px 16px;
        margin-left: 8px;
        border-radius: 6px;
        cursor: pointer;
        transition: 0.2s;
    }

    nav button.active,
    nav button:hover {
        background: #0bbf9a;
        color: #000;
    }

    #btnLogout {
        background: #f44336;
        border: none;
        color: white;
    }
    #btnLogout:hover {
        background: #ff7961;
    }

    /* ========= CARD ========= */
    .card {
        width: 90%;
        max-width: 480px;
        background: #181b20;
        padding: 30px;
        margin: 40px auto;
        border-radius: 10px;
        box-shadow: 0 4px 18px #0007;
    }

    h3 {
        font-size: 26px;
        text-align: center;
        margin-bottom: 20px;
        color: #0bbf9a;
        text-decoration: underline;
        text-underline-offset: 6px;
    }

    /* ========= INPUT ========= */
    input {
        width: 100%;
        padding: 12px;
        margin-top: 10px;
        border: 1px solid #2f3135;
        border-radius: 6px;
        background: #111318;
        color: #fff;
        font-size: 15px;
    }
    input:focus {
        outline: 1px solid #0bbf9a;
    }

    /* ========= BUTTON ========= */
    button.primary {
        width: 100%;
        padding: 12px;
        margin-top: 16px;
        background: #0bbf9a;
        border: none;
        border-radius: 30px;
        font-size: 16px;
        color: #000;
        cursor: pointer;
        transition: 0.2s;
    }
    button.primary:hover {
        background: #0de7b8;
    }

    /* ========= STAT BOX ========= */
    .stat-box {
        background: #111318;
        padding: 15px;
        border-radius: 8px;
        margin-top: 12px;
        color: #eee;
        border: 1px solid #0bbf9a33;
    }

    .hidden { display: none; }

    /* ========= MESSAGE ========= */
    #msg {
        margin-top: 10px;
        text-align: center;
        font-size: 14px;
    }
</style>
</head>

<body>

<header>
  <h2>♻️ Bottle Sorting</h2>
  <nav>
    <button id="btnLogin" class="active" onclick="showPage('login')">Login</button>
    <button id="btnRegister" onclick="showPage('register')">Register</button>
    <button id="btnDashboard" onclick="showPage('dashboard')">Dashboard</button>
    <button id="btnChange" onclick="showPage('change')">Change Point</button>
    <button id="btnLogout" onclick="logout()" style="display:none;">Logout</button>
  </nav>
</header>

<div id="msg"></div>

<!-- LOGIN -->
<div id="login" class="card">
  <h3>เข้าสู่ระบบ</h3>
  <input id="loginPhone" placeholder="กรอกเบอร์โทรที่ใช้สมัคร">
  <input id="loginPass" type="password" placeholder="รหัสผ่าน">
  <button class="primary" onclick="doLogin()">เข้าสู่ระบบ</button>
</div>

<!-- REGISTER -->
<div id="register" class="card hidden">
  <h3>สมัครสมาชิก</h3>
  <input id="regFirst" placeholder="ชื่อจริง">
  <input id="regLast" placeholder="นามสกุล">
  <input id="regPhone" placeholder="เบอร์โทรศัพท์">
  <input id="regPass" type="password" placeholder="รหัสผ่าน (อย่างน้อย 6 ตัว)">
  <button class="primary" onclick="doRegister()">สมัครสมาชิก</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="card hidden">
  <h3>Dashboard</h3>

  <label>ชื่อ-นามสกุล</label>
  <input id="dbName" disabled>

  <label>เบอร์โทร</label>
  <input id="dbPhone" disabled>

  <label>คะแนนสะสม</label>
  <input id="dbPoints" disabled>

  <div class="stat-box">
    <b>Plastic Bottle</b><br>
    Count: <span id="plasticCount">0</span>
    <button class="primary" onclick="addBottle('plastic')">+1 Plastic</button>
  </div>

  <div class="stat-box">
    <b>Glass Bottle</b><br>
    Count: <span id="glassCount">0</span>
    <button class="primary" onclick="addBottle('glass')">+1 Glass</button>
  </div>

  <div class="stat-box">
    <b>Aluminium Can</b><br>
    Count: <span id="alCount">0</span>
    <button class="primary" onclick="addBottle('al')">+1 Aluminium</button>
  </div>
</div>

<!-- CHANGE POINT -->
<div id="change" class="card hidden">
  <h3>แลกคะแนนเป็นเงิน</h3>
  <input id="curPoints" disabled>
  <input id="redeemPoint" type="number" placeholder="จำนวนคะแนนที่ต้องการแลก">
  <input id="redeemPrompt" placeholder="PromptPay ID">
  <button class="primary" onclick="redeem()">ยืนยันแลกคะแนน</button>
</div>

<script>
/* ใช้สคริปต์ Firebase ของคุณเหมือนเดิมทุกบรรทัด */
</script>

</body>
</html>
